<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App Redirect</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin-top: 50px;
    }
  </style>
</head>
<body>
  <h1>Redirecting you to our app...</h1>
  <p>
    If you are not redirected automatically, please click
    <a id="fallbackLink" href="https://play.google.com/store/apps/details?id=com.example.app">here</a>.
  </p>
 
  <script>
    const deepLinkUrl = "instagram://user?username=instagram"; // Replace with your app's URI
    const playStoreUrl = "https://play.google.com/store/apps/details?id=com.google.android.apps.maps"; // Replace with your Play Store URL
 
    let hasNavigatedAway = false;
 
    // Detect if the user left the page (because app opened)
    const beforeUnloadHandler = () => {
      hasNavigatedAway = true;
    };
 
    window.addEventListener("blur", beforeUnloadHandler); // Most reliable signal on mobile
 
    // Set up fallback to Play Store if app wasn't opened
    const fallbackTimeout = setTimeout(() => {
      if (!hasNavigatedAway) {
        window.location.href = playStoreUrl;
      }
    }, 1500);
 
    // Try opening the deep link
    window.location.href = deepLinkUrl;
 
    // Clean up the event listener
    window.addEventListener("beforeunload", () => {
      clearTimeout(fallbackTimeout);
      window.removeEventListener("blur", beforeUnloadHandler);
    });
 
    // Update fallback link in case they click it
    document.getElementById("fallbackLink").href = playStoreUrl;
  </script>
</body>
</html>